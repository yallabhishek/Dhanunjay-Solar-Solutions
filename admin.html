<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Admin Panel - DhanunJay Solar Solutions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }

        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .admin-header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .admin-header h1 {
            color: #1e3c72;
            margin-bottom: 10px;
        }

        .admin-header p {
            color: #666;
        }

        .admin-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .brand-selector {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .brand-selector h3 {
            margin-bottom: 20px;
            color: #1e3c72;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .brand-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .brand-item {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: capitalize;
            font-weight: 500;
        }

        .brand-item:hover {
            border-color: #FF7C00;
            background: #fff5f0;
        }

        .brand-item.active {
            border-color: #FF7C00;
            background: #FF7C00;
            color: white;
        }

        .pricing-editor {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .pricing-editor h3 {
            margin-bottom: 20px;
            color: #1e3c72;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .kw-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
        }

        .kw-tab {
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .kw-tab:hover {
            border-color: #28a745;
            background: #f8fff9;
        }

        .kw-tab.active {
            border-color: #28a745;
            background: #28a745;
            color: white;
        }

        .pricing-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #FF7C00;
        }

        .action-buttons {
            grid-column: 1 / -1;
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-save {
            background: #28a745;
            color: white;
        }

        .btn-save:hover {
            background: #218838;
        }

        .btn-reset {
            background: #dc3545;
            color: white;
        }

        .btn-reset:hover {
            background: #c82333;
        }

        .btn-load {
            background: #007bff;
            color: white;
        }

        .btn-load:hover {
            background: #0056b3;
        }

        .btn-copy {
            background: #17a2b8;
            color: white;
        }

        .btn-copy:hover {
            background: #138496;
        }

        .btn-paste {
            background: #6f42c1;
            color: white;
        }

        .btn-paste:hover {
            background: #5a32a3;
        }

        .status-panel {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .status-panel h3 {
            margin-bottom: 20px;
            color: #1e3c72;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-label {
            font-weight: 600;
            color: #333;
        }

        .status-value {
            color: #28a745;
            font-weight: 600;
        }

        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .login-form {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .login-form h2 {
            margin-bottom: 30px;
            color: #1e3c72;
        }

        .login-form input {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 16px;
        }

        .login-form button {
            width: 100%;
            padding: 15px;
            background: #FF7C00;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .login-form button:hover {
            background: #e56a00;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .admin-grid {
                grid-template-columns: 1fr;
            }
            
            .pricing-form {
                grid-template-columns: 1fr;
            }
            
            .kw-tabs {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Login Overlay -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-form">
            <h2><i class="fas fa-lock"></i> Admin Login</h2>
            <input type="password" id="adminPassword" placeholder="Enter admin password" required>
            <button onclick="login()">Access Admin Panel</button>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-container hidden">
        <div class="admin-header">
            <h1><i class="fas fa-solar-panel"></i> Solar Pricing Admin Panel</h1>
            <p>Manage pricing data for all brands and system capacities</p>
        </div>

        <div class="admin-grid">
            <div class="brand-selector">
                <h3><i class="fas fa-tags"></i> Select Brand</h3>
                <div class="brand-list">
                    <div class="brand-item active" data-brand="tata" onclick="selectBrand('tata')">
                        <i class="fas fa-bolt"></i> Tata Power
                    </div>
                    <div class="brand-item" data-brand="exide" onclick="selectBrand('exide')">
                        <i class="fas fa-battery-full"></i> Exide
                    </div>
                    <div class="brand-item" data-brand="luminous" onclick="selectBrand('luminous')">
                        <i class="fas fa-lightbulb"></i> Luminous
                    </div>
                    <div class="brand-item" data-brand="adani" onclick="selectBrand('adani')">
                        <i class="fas fa-industry"></i> Adani
                    </div>
                    <div class="brand-item" data-brand="waaree" onclick="selectBrand('waaree')">
                        <i class="fas fa-sun"></i> Waaree
                    </div>
                </div>
            </div>

            <div class="pricing-editor">
                <h3><i class="fas fa-edit"></i> Edit Pricing - <span id="currentBrand">Tata Power</span></h3>
                
                <div class="kw-tabs">
                    <div class="kw-tab active" data-kw="1" onclick="selectKW(1)">1 KW</div>
                    <div class="kw-tab" data-kw="2" onclick="selectKW(2)">2 KW</div>
                    <div class="kw-tab" data-kw="3" onclick="selectKW(3)">3 KW</div>
                    <div class="kw-tab" data-kw="4" onclick="selectKW(4)">4 KW</div>
                    <div class="kw-tab" data-kw="5" onclick="selectKW(5)">5 KW</div>
                    <div class="kw-tab" data-kw="6" onclick="selectKW(6)">6 KW</div>
                    <div class="kw-tab" data-kw="7" onclick="selectKW(7)">7 KW</div>
                    <div class="kw-tab" data-kw="8" onclick="selectKW(8)">8 KW</div>
                    <div class="kw-tab" data-kw="9" onclick="selectKW(9)">9 KW</div>
                    <div class="kw-tab" data-kw="10" onclick="selectKW(10)">10 KW</div>
                </div>

                <div class="pricing-form">
                    <div class="form-group">
                        <label for="generation"><i class="fas fa-bolt"></i> Monthly Generation (units)</label>
                        <input type="number" id="generation" placeholder="e.g., 120">
                    </div>
                    <div class="form-group">
                        <label for="savings"><i class="fas fa-rupee-sign"></i> Annual Savings (‚Çπ)</label>
                        <input type="number" id="savings" placeholder="e.g., 14400">
                    </div>
                    <div class="form-group">
                        <label for="price"><i class="fas fa-tag"></i> Total System Price (‚Çπ)</label>
                        <input type="number" id="price" placeholder="e.g., 60000">
                    </div>
                    <div class="form-group">
                        <label for="subsidy"><i class="fas fa-gift"></i> Government Subsidy (‚Çπ)</label>
                        <input type="number" id="subsidy" placeholder="e.g., 18000">
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-save" onclick="savePricing()">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                        <button class="btn btn-load" onclick="loadPricing()">
                            <i class="fas fa-sync"></i> Load Current
                        </button>
                        <button class="btn btn-copy" onclick="copyBrandData()">
                            <i class="fas fa-copy"></i> Copy Brand Data
                        </button>
                        <button class="btn btn-paste" onclick="pasteBrandData()">
                            <i class="fas fa-paste"></i> Paste Brand Data
                        </button>
                        <button class="btn btn-reset" onclick="resetToDefaults()">
                            <i class="fas fa-undo"></i> Reset to Default
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="status-panel">
            <h3><i class="fas fa-info-circle"></i> System Status</h3>
            <div class="status-item">
                <span class="status-label">Current Brand:</span>
                <span class="status-value" id="statusBrand">Tata Power</span>
            </div>
            <div class="status-item">
                <span class="status-label">Current Capacity:</span>
                <span class="status-value" id="statusKW">1 KW</span>
            </div>
            <div class="status-item">
                <span class="status-label">Last Saved:</span>
                <span class="status-value" id="lastSaved">Never</span>
            </div>
            <div class="status-item">
                <span class="status-label">Data Sync:</span>
                <span class="status-value" id="syncStatus">Ready</span>
            </div>
            <div class="status-item">
                <span class="status-label">Copied Data:</span>
                <span class="status-value" id="copiedStatus">None</span>
            </div>
        </div>
    </div>

    <script>
        // Admin configuration
        const ADMIN_PASSWORD = 'solar2024';
        let currentBrand = 'tata';
        let currentKW = 1;
        let copiedBrandData = null;

        // Default pricing data
        const defaultPricing = {
            tata: {
                1: { generation: 120, savings: 14400, price: 60000, subsidy: 18000 },
                2: { generation: 240, savings: 28800, price: 125000, subsidy: 37500 },
                3: { generation: 360, savings: 43200, price: 180000, subsidy: 78000 },
                4: { generation: 480, savings: 57600, price: 240000, subsidy: 72000 },
                5: { generation: 600, savings: 72000, price: 300000, subsidy: 90000 },
                6: { generation: 720, savings: 86400, price: 350000, subsidy: 105000 },
                7: { generation: 840, savings: 100800, price: 385000, subsidy: 115500 },
                8: { generation: 960, savings: 115200, price: 400000, subsidy: 120000 },
                9: { generation: 1080, savings: 129600, price: 415000, subsidy: 124500 },
                10: { generation: 1200, savings: 144000, price: 425000, subsidy: 127500 }
            },
            exide: {
                1: { generation: 110, savings: 13200, price: 58000, subsidy: 17400 },
                2: { generation: 220, savings: 26400, price: 118000, subsidy: 35400 },
                3: { generation: 330, savings: 39600, price: 175000, subsidy: 52500 },
                4: { generation: 440, savings: 52800, price: 235000, subsidy: 70500 },
                5: { generation: 550, savings: 66000, price: 295000, subsidy: 88500 },
                6: { generation: 660, savings: 79200, price: 345000, subsidy: 103500 },
                7: { generation: 770, savings: 92400, price: 375000, subsidy: 112500 },
                8: { generation: 880, savings: 105600, price: 395000, subsidy: 118500 },
                9: { generation: 990, savings: 118800, price: 410000, subsidy: 123000 },
                10: { generation: 1100, savings: 132000, price: 420000, subsidy: 126000 }
            },
            luminous: {
                1: { generation: 115, savings: 13800, price: 59000, subsidy: 17700 },
                2: { generation: 230, savings: 27600, price: 120000, subsidy: 36000 },
                3: { generation: 345, savings: 41400, price: 177000, subsidy: 53100 },
                4: { generation: 460, savings: 55200, price: 237000, subsidy: 71100 },
                5: { generation: 575, savings: 69000, price: 297000, subsidy: 89100 },
                6: { generation: 690, savings: 82800, price: 347000, subsidy: 104100 },
                7: { generation: 805, savings: 96600, price: 377000, subsidy: 113100 },
                8: { generation: 920, savings: 110400, price: 397000, subsidy: 119100 },
                9: { generation: 1035, savings: 124200, price: 412000, subsidy: 123600 },
                10: { generation: 1150, savings: 138000, price: 422000, subsidy: 126600 }
            },
            adani: {
                1: { generation: 125, savings: 15000, price: 62000, subsidy: 18600 },
                2: { generation: 250, savings: 30000, price: 127000, subsidy: 38100 },
                3: { generation: 375, savings: 45000, price: 182000, subsidy: 54600 },
                4: { generation: 500, savings: 60000, price: 242000, subsidy: 72600 },
                5: { generation: 625, savings: 75000, price: 302000, subsidy: 90600 },
                6: { generation: 750, savings: 90000, price: 352000, subsidy: 105600 },
                7: { generation: 875, savings: 105000, price: 382000, subsidy: 114600 },
                8: { generation: 1000, savings: 120000, price: 402000, subsidy: 120600 },
                9: { generation: 1125, savings: 135000, price: 417000, subsidy: 125100 },
                10: { generation: 1250, savings: 150000, price: 427000, subsidy: 128100 }
            },
            waaree: {
                1: { generation: 128, savings: 15360, price: 61000, subsidy: 18300 },
                2: { generation: 256, savings: 30720, price: 126000, subsidy: 37800 },
                3: { generation: 384, savings: 46080, price: 181000, subsidy: 54300 },
                4: { generation: 512, savings: 61440, price: 241000, subsidy: 72300 },
                5: { generation: 640, savings: 76800, price: 301000, subsidy: 90300 },
                6: { generation: 768, savings: 92160, price: 351000, subsidy: 105300 },
                7: { generation: 896, savings: 107520, price: 381000, subsidy: 114300 },
                8: { generation: 1024, savings: 122880, price: 401000, subsidy: 120300 },
                9: { generation: 1152, savings: 138240, price: 416000, subsidy: 124800 },
                10: { generation: 1280, savings: 153600, price: 426000, subsidy: 127800 }
            }
        };

        // Login function
        function login() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                document.getElementById('loginOverlay').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                loadPricing();
            } else {
                alert('‚ùå Incorrect password!');
                document.getElementById('adminPassword').value = '';
            }
        }

        // Brand selection
        function selectBrand(brand) {
            currentBrand = brand;
            
            // Update UI
            document.querySelectorAll('.brand-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-brand="${brand}"]`).classList.add('active');
            
            // Update brand display
            const brandNames = {
                tata: 'Tata Power',
                exide: 'Exide',
                luminous: 'Luminous',
                adani: 'Adani',
                waaree: 'Waaree'
            };
            
            document.getElementById('currentBrand').textContent = brandNames[brand];
            document.getElementById('statusBrand').textContent = brandNames[brand];
            
            loadPricing();
        }

        // KW selection
        function selectKW(kw) {
            currentKW = kw;
            
            // Update UI
            document.querySelectorAll('.kw-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-kw="${kw}"]`).classList.add('active');
            
            document.getElementById('statusKW').textContent = kw + ' KW';
            
            loadPricing();
        }

        // Load pricing data
        function loadPricing() {
            const savedData = localStorage.getItem('customPricingData');
            let pricingData = defaultPricing;
            
            if (savedData) {
                try {
                    const customData = JSON.parse(savedData);
                    // Merge custom data with defaults
                    Object.keys(customData).forEach(brand => {
                        if (!pricingData[brand]) pricingData[brand] = {};
                        Object.keys(customData[brand]).forEach(kw => {
                            pricingData[brand][kw] = { ...pricingData[brand][kw], ...customData[brand][kw] };
                        });
                    });
                } catch (error) {
                    console.error('Error loading custom data:', error);
                }
            }
            
            const data = pricingData[currentBrand][currentKW];
            if (data) {
                document.getElementById('generation').value = data.generation;
                document.getElementById('savings').value = data.savings;
                document.getElementById('price').value = data.price;
                document.getElementById('subsidy').value = data.subsidy;
            }
            
            document.getElementById('syncStatus').textContent = 'Loaded';
        }

        // Save pricing data
        function savePricing() {
            const generation = parseInt(document.getElementById('generation').value) || 0;
            const savings = parseInt(document.getElementById('savings').value) || 0;
            const price = parseInt(document.getElementById('price').value) || 0;
            const subsidy = parseInt(document.getElementById('subsidy').value) || 0;
            
            if (generation === 0 || savings === 0 || price === 0) {
                alert('‚ùå Please fill all fields with valid values!');
                return;
            }
            
            // Get existing custom data
            let customData = {};
            const savedData = localStorage.getItem('customPricingData');
            if (savedData) {
                try {
                    customData = JSON.parse(savedData);
                } catch (error) {
                    console.error('Error parsing saved data:', error);
                }
            }
            
            // Update the data
            if (!customData[currentBrand]) {
                customData[currentBrand] = {};
            }
            
            customData[currentBrand][currentKW] = {
                generation: generation,
                savings: savings,
                price: price,
                subsidy: subsidy
            };
            
            // Save to localStorage
            localStorage.setItem('customPricingData', JSON.stringify(customData));
            
            // Also save to main site keys for compatibility
            localStorage.setItem('solarPricingData', JSON.stringify(customData));
            localStorage.setItem('brandPricingData', JSON.stringify(customData));
            localStorage.setItem('onGridPricing', JSON.stringify(customData));
            
            // Update status
            document.getElementById('lastSaved').textContent = new Date().toLocaleTimeString();
            document.getElementById('syncStatus').textContent = 'Saved';
            
            alert('‚úÖ Pricing data saved successfully!');
            
            console.log('Saved pricing data:', customData);
        }

        // Reset to defaults
        function resetToDefaults() {
            if (confirm('Are you sure you want to reset to default values?')) {
                const data = defaultPricing[currentBrand][currentKW];
                document.getElementById('generation').value = data.generation;
                document.getElementById('savings').value = data.savings;
                document.getElementById('price').value = data.price;
                document.getElementById('subsidy').value = data.subsidy;
                
                document.getElementById('syncStatus').textContent = 'Reset';
            }
        }

        // Handle Enter key in password field
        document.getElementById('adminPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                login();
            }
        });

        // Copy brand data
        function copyBrandData() {
            const savedData = localStorage.getItem('customPricingData');
            let pricingData = defaultPricing;
            
            if (savedData) {
                try {
                    const customData = JSON.parse(savedData);
                    // Merge custom data with defaults
                    Object.keys(customData).forEach(brand => {
                        if (!pricingData[brand]) pricingData[brand] = {};
                        Object.keys(customData[brand]).forEach(kw => {
                            pricingData[brand][kw] = { ...pricingData[brand][kw], ...customData[brand][kw] };
                        });
                    });
                } catch (error) {
                    console.error('Error loading custom data:', error);
                }
            }
            
            // Copy all KW data for current brand
            if (pricingData[currentBrand]) {
                copiedBrandData = {
                    brand: currentBrand,
                    data: JSON.parse(JSON.stringify(pricingData[currentBrand])) // Deep copy
                };
                
                const brandNames = {
                    tata: 'Tata Power',
                    exide: 'Exide',
                    luminous: 'Luminous',
                    adani: 'Adani',
                    waaree: 'Waaree'
                };
                
                document.getElementById('copiedStatus').textContent = brandNames[currentBrand];
                document.getElementById('syncStatus').textContent = 'Data Copied';
                
                alert(`‚úÖ Copied all pricing data from ${brandNames[currentBrand]}!\nYou can now paste this data to another brand.`);
                console.log('Copied brand data:', copiedBrandData);
            } else {
                alert('‚ùå No data found for current brand!');
            }
        }

        // Paste brand data
        function pasteBrandData() {
            if (!copiedBrandData) {
                alert('‚ùå No data copied! Please copy data from a brand first.');
                return;
            }
            
            const brandNames = {
                tata: 'Tata Power',
                exide: 'Exide',
                luminous: 'Luminous',
                adani: 'Adani',
                waaree: 'Waaree'
            };
            
            const sourceBrand = brandNames[copiedBrandData.brand];
            const targetBrand = brandNames[currentBrand];
            
            if (copiedBrandData.brand === currentBrand) {
                alert('‚ö†Ô∏è Cannot paste data to the same brand it was copied from!');
                return;
            }
            
            const confirmPaste = confirm(`üîÑ Paste all pricing data from ${sourceBrand} to ${targetBrand}?\n\nThis will overwrite ALL existing data for ${targetBrand} (1KW to 10KW).`);
            
            if (confirmPaste) {
                // Get existing custom data
                let customData = {};
                const savedData = localStorage.getItem('customPricingData');
                if (savedData) {
                    try {
                        customData = JSON.parse(savedData);
                    } catch (error) {
                        console.error('Error parsing saved data:', error);
                    }
                }
                
                // Paste the copied data to current brand
                if (!customData[currentBrand]) {
                    customData[currentBrand] = {};
                }
                
                // Copy all KW data
                customData[currentBrand] = JSON.parse(JSON.stringify(copiedBrandData.data));
                
                // Save to localStorage
                localStorage.setItem('customPricingData', JSON.stringify(customData));
                localStorage.setItem('solarPricingData', JSON.stringify(customData));
                localStorage.setItem('brandPricingData', JSON.stringify(customData));
                localStorage.setItem('onGridPricing', JSON.stringify(customData));
                
                // Update status
                document.getElementById('lastSaved').textContent = new Date().toLocaleTimeString();
                document.getElementById('syncStatus').textContent = 'Data Pasted';
                
                // Reload current pricing to show pasted data
                loadPricing();
                
                alert(`‚úÖ Successfully pasted all pricing data from ${sourceBrand} to ${targetBrand}!\n\nAll KW values (1KW to 10KW) have been copied.`);
                console.log('Pasted brand data to:', currentBrand, customData[currentBrand]);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('adminPassword').focus();
        });
    </script>
</body>
</html>
